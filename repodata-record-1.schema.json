{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://schemas.conda.io/repodata-record-1.schema.json",
  "type": "object",
  "title": "Conda Package Metadata Record Schema",
  "description": "The schema for each package file's block of metadata in repodata.",
  "$comment": "TODO add these back to required: record_version ext fn subdir",
  "required": [
    "subdir",
    "name",
    "version",
    "build_number",
    "build",
    "fn",
    "sha256",
    "size",
    "md5"
  ],
  "properties": {
    "record_version": {
      "type": "integer",
      "description": "The API version or schema version of the record. Conda versions through at least Conda 4.8 are able to understand record_version <= 1.",
      "const": 1,
      "patchable": true
    },
    "origin_channel_name": {"$ref": "common-1.schema.json#/definitions/origin_channel_name"},
    "subdir": {"$ref": "common-1.schema.json#/definitions/subdir"},
    "namespace": {"$ref": "common-1.schema.json#/definitions/namespace"},
    "name": {"$ref": "common-1.schema.json#/definitions/name"},
    "version": {"$ref": "common-1.schema.json#/definitions/package_version"},
    "build_number": {"$ref": "common-1.schema.json#/definitions/build_number"},
    "build": {"$ref": "common-1.schema.json#/definitions/build"},
    "fn": {
      "type": "string",
      "description": "The file name should be generated based on other fields in the package's metadata, i.e. {name}-{version}-{build}{ext}. It should be validated against those fields.",
      "patchable": false,
      "examples": [
        "ansible-1.9.3-py27_0.tar.bz2",
        "basemap-1.2.0-py27hbee0394_0.conda"
      ]
    },
    "sha256": {"$ref": "common-1.schema.json#/definitions/sha256"},
    "size": {"$ref": "common-1.schema.json#/definitions/size"},
    "md5": {"$ref": "common-1.schema.json#/definitions/md5"},
    "timestamp": {"$ref": "common-1.schema.json#/definitions/timestamp"},
    "patch_version": {
      "type": "integer",
      "minimum": 0,
      "description": "Metadata record patch version. Incremented for each change of the metadata record.",
      "patchable": true
    },
    "depends": {"$ref": "common-1.schema.json#/definitions/depends"},
    "constrains": {"$ref": "common-1.schema.json#/definitions/constrains"},
    "features": {
      "deprecated": true,
      "type": "string",
      "description": "The features provided by the package. Format is a space-delimited string of items.",
      "patchable": true,
      "pattern": "^([a-z0-9-_.]+( |$))*$"
    },
    "track_features": {
      "type": "string",
      "description": "The features 'tracked' by the package. Format is a space-delimited string of items. https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#track-features",
      "patchable": true,
      "pattern": "^([a-z0-9-_.]+( |$))*$"
    },
    "noarch": {
      "deprecated": true,
      "type": "string",
      "description": "The noarch type of a package (if applicable).",
      "patchable": true,
      "enum": [
        "generic",
        "python"
      ]
    },
    "license": {"$ref": "common-1.schema.json#/definitions/license"},
    "license_family": {"$ref": "common-1.schema.json#/definitions/license_family"},
    "spdx_license": {"$ref": "common-1.schema.json#/definitions/spdx_license"},
    "vulns_active": {
      "type": "array",
      "description": "Vulnerabilities that have been identified for the package that are potentially active and exploitable.",
      "patchable": true,
      "items": {"$ref": "common-1.schema.json#/definitions/vuln_id"}
    },
    "vulns_mitigated": {
      "type": "array",
      "description": "Vulnerabilities that have been identified for the package but have proactively been mitigated in this package build through a code patch.",
      "patchable": true,
      "items": {"$ref": "common-1.schema.json#/definitions/vuln_id"}
    },
    "vulns_cleared": {
      "type": "array",
      "description": "Vulnerabilities associated with the package that have been analyzed and determined to not be applicable.",
      "patchable": true,
      "items": {"$ref": "common-1.schema.json#/definitions/vuln_id"}
    },
    "vulns_disputed": {
      "type": "array",
      "description": "Vulnerabilities where legitimacy as an actual vulnerability is disputed by upstream project maintainers or other community members.",
      "patchable": true,
      "items": {"$ref": "common-1.schema.json#/definitions/vuln_id"}
    },
    "post_solve_message": {
      "type": "string",
      "patchable": true
    },
    "post_link_message": {
      "type": "string",
      "patchable": true
    }
  }
}
